{
    "author": "Zao_chen",
    "block": [
        {
            "block": "command_block",
            "condition": 1,
            "content": "scoreboard players set base cal_10 20",
            "delay": 0,
            "execute": false,
            "note": "除20的备选项",
            "redstone": 1,
            "toward": 1,
            "type": 1,
            "x": 1,
            "y": 0,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "scoreboard objectives add cal_10 dummy",
            "delay": 0,
            "execute": false,
            "note": "用于计算的计分板",
            "redstone": 1,
            "toward": 1,
            "type": 1,
            "x": 1,
            "y": 1,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "execute as @e[name=砍树] at @e[name=砍树] run tp @s @s",
            "delay": 0,
            "execute": false,
            "note": "防止npc移动",
            "redstone": 2,
            "toward": 1,
            "type": 3,
            "x": 1,
            "y": 3,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "playanimation @e[name=砍树] animation.creeper.swelling move 1000",
            "delay": 0,
            "execute": false,
            "note": "npc隐身",
            "redstone": 2,
            "toward": 1,
            "type": 3,
            "x": 1,
            "y": 5,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "scoreboard players set base100 cal_10 100",
            "delay": 0,
            "execute": false,
            "note": "除100的备选项",
            "redstone": 1,
            "toward": 1,
            "type": 1,
            "x": 2,
            "y": 0,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "scoreboard objectives add player_uid dummy",
            "delay": 0,
            "execute": false,
            "note": "保存玩家uid的计分板",
            "redstone": 1,
            "toward": 1,
            "type": 1,
            "x": 2,
            "y": 1,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "scoreboard objectives add allay_uid dummy",
            "delay": 0,
            "execute": false,
            "note": "保存悦灵uid的计分板",
            "redstone": 1,
            "toward": 1,
            "type": 1,
            "x": 3,
            "y": 1,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "execute as @e[name=allay_tree] at @s run tp @s @e[c=1,name=砍树]",
            "delay": 0,
            "execute": false,
            "note": "悦灵tp到npc",
            "redstone": 2,
            "toward": 1,
            "type": 3,
            "x": 3,
            "y": 3,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "kill @e[scores={allay_clock=-100..0}]",
            "delay": 0,
            "execute": false,
            "note": "杀死倒计时结束的悦灵",
            "redstone": 2,
            "toward": 1,
            "type": 3,
            "x": 3,
            "y": 5,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "scoreboard objectives add allay_clock dummy",
            "delay": 0,
            "execute": false,
            "note": "砍树倒计时计分板",
            "redstone": 1,
            "toward": 1,
            "type": 1,
            "x": 4,
            "y": 1,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "execute as @e[name=砍树,tag=!already] at @s run scoreboard players operation @s allay_uid = @p player_uid",
            "delay": 0,
            "execute": false,
            "note": "检查有人砍树并把悦灵uid和主人统一",
            "redstone": 2,
            "toward": 3,
            "type": 3,
            "x": 6,
            "y": 1,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "scoreboard players remove @e[name=allay_tree] allay_clock 1",
            "delay": 4,
            "execute": false,
            "note": "悦灵倒计时--",
            "redstone": 2,
            "toward": 3,
            "type": 3,
            "x": 6,
            "y": 3,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "testfor @e[name=砍树]",
            "delay": 4,
            "execute": false,
            "note": "检查有没有悦灵",
            "redstone": 2,
            "toward": 3,
            "type": 3,
            "x": 6,
            "y": 5,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "execute as @a[c=1,tag=!pl_has_do] run tag @s add pl_has_do",
            "delay": 0,
            "execute": false,
            "note": "有序遍历",
            "redstone": 2,
            "toward": 3,
            "type": 3,
            "x": 6,
            "y": 7,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 2,
            "content": "execute as @e[name=砍树,tag=!already] run scoreboard players set @s allay_clock 1000",
            "delay": 0,
            "execute": false,
            "note": "设置悦灵倒计时为1000（挖10x10x10）",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 7,
            "y": 1,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "scoreboard players remove @e[name=砍树] allay_clock 1",
            "delay": 0,
            "execute": false,
            "note": "工具人npc--",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 7,
            "y": 3,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 2,
            "content": "execute as @e[name=砍树,c=1,tag=!all_has_do] run tag @s add all_has_do",
            "delay": 0,
            "execute": false,
            "note": "有序遍历",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 7,
            "y": 5,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "execute as @a[c=-1,tag=pl_has_do] at @s run scoreboard players operation @s cal_10 = @s player_uid",
            "delay": 0,
            "execute": false,
            "note": "计算你是不是主人",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 7,
            "y": 7,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 2,
            "content": "execute as @e[name=砍树,tag=!already] at @e[name=砍树,tag=!already] run tp @s ~-5 ~8 ~-5 0 0",
            "delay": 0,
            "execute": false,
            "note": "传送到角落",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 8,
            "y": 1,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "execute as @e[name=砍树] at @s run tp ^ ^ ^1",
            "delay": 0,
            "execute": false,
            "note": "工具人向前走",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 8,
            "y": 3,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 2,
            "content": "execute as @e[name=砍树,c=-1,tag=all_has_do] at @s run testforblock ~ ~ ~ log",
            "delay": 0,
            "execute": false,
            "note": "检测有没有遇到木头",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 8,
            "y": 5,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "execute as @a[c=-1,tag=pl_has_do] at @s run scoreboard players operation @s cal_10 -= @e[tag=choose] allay_uid",
            "delay": 0,
            "execute": false,
            "note": "计算你是不是主人",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 8,
            "y": 7,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 2,
            "content": "execute at @e[name=砍树,tag=!already] run summon allay allay_tree",
            "delay": 0,
            "execute": false,
            "note": "生成悦灵",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 9,
            "y": 1,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "execute as @e[name=砍树] run scoreboard players operation @s cal_10 = @s allay_clock",
            "delay": 0,
            "execute": false,
            "note": "准备计算",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 9,
            "y": 3,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 2,
            "content": "execute as @e[name=砍树,c=-1,tag=all_has_do] at @s run setblock ~ ~ ~ air [] destroy",
            "delay": 0,
            "execute": false,
            "note": "摧毁木头",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 9,
            "y": 5,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "scoreboard players test @a[c=-1,tag=pl_has_do] cal_10 0 0",
            "delay": 0,
            "execute": false,
            "note": "计算你是不是主人",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 9,
            "y": 7,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 2,
            "content": "execute as @e[name=砍树,tag=!already] at @s run scoreboard players set @e[c=1,name=allay_tree] allay_clock 1000",
            "delay": 0,
            "execute": false,
            "note": "设置悦灵倒计时",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 10,
            "y": 1,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "execute as @e[name=砍树] run scoreboard players operation @s cal_10 %= base cal_10",
            "delay": 0,
            "execute": false,
            "note": "对10取余",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 10,
            "y": 3,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 2,
            "content": "execute as @e[name=砍树,c=-1,tag=all_has_do] at @s run kill @e[c=1,type=item,name=橡树原木]",
            "delay": 0,
            "execute": false,
            "note": "删除木头掉落物",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 10,
            "y": 5,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 2,
            "content": "tag @e remove choose",
            "delay": 0,
            "execute": false,
            "note": "清空选中",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 10,
            "y": 7,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 2,
            "content": "tag @e[name=砍树] add already",
            "delay": 0,
            "execute": false,
            "note": "添加标签防止重复记录",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 11,
            "y": 1,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "execute as @e[name=砍树,scores={cal_10=0}] at @s run tp ~ ~ ~ ~90 ~",
            "delay": 0,
            "execute": false,
            "note": "如果到了拐角，旋转",
            "redstone": 1,
            "toward": 3,
            "type": 2,
            "x": 11,
            "y": 3,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 2,
            "content": "setblock 6 -60 8 redstone_block",
            "delay": 0,
            "execute": false,
            "note": "触发循环嵌套中的给物品",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 11,
            "y": 5,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 2,
            "content": "give @a[c=-1,tag=pl_has_do] log",
            "delay": 0,
            "execute": false,
            "note": "给他一个木头",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 11,
            "y": 7,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "execute as @e[name=砍树,scores={cal_10=1}] at @s run tp ~ ~ ~ ~90 ~",
            "delay": 0,
            "execute": false,
            "note": "再旋转一次",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 12,
            "y": 3,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 2,
            "content": "execute as @e[name=砍树,c=-1,tag=all_has_do] at @s run tag @s add choose",
            "delay": 0,
            "execute": false,
            "note": "记录，用于循环嵌套",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 12,
            "y": 5,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 2,
            "content": "setblock 6 -60 8 air",
            "delay": 0,
            "execute": false,
            "note": "退出循环",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 12,
            "y": 7,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "execute as @e[name=砍树,scores={cal_10=10}] at @s run tp ~ ~ ~ ~-90 ~",
            "delay": 0,
            "execute": false,
            "note": "再旋转一次",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 13,
            "y": 3,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "execute as @e[name=砍树,c=-1,tag=all_has_do] at @s run testforblock ~ ~ ~ leaves",
            "delay": 0,
            "execute": false,
            "note": "检测叶子",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 13,
            "y": 5,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "execute as @a[c=-1] as @s[tag=pl_has_do] run tag @a remove pl_has_do",
            "delay": 0,
            "execute": false,
            "note": "有序遍历",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 13,
            "y": 7,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "execute as @e[name=砍树,scores={cal_10=11}] at @s run tp ~ ~ ~ ~-90 ~",
            "delay": 0,
            "execute": false,
            "note": "再旋转一次",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 14,
            "y": 3,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 2,
            "content": "execute as @e[name=砍树,c=-1,tag=all_has_do] at @s run setblock ~ ~ ~ air [] destroy",
            "delay": 0,
            "execute": false,
            "note": "直接摧毁叶子",
            "redstone": 1,
            "toward": 3,
            "type": 2,
            "x": 14,
            "y": 5,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "execute as @e[name=砍树] run scoreboard players operation @s cal_10 = @s allay_clock",
            "delay": 0,
            "execute": false,
            "note": "用于计算要不要往下一层",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 15,
            "y": 3,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "execute as @e[name=砍树,c=-1,tag=all_has_do] at @s run testforblock ~ ~ ~ air",
            "delay": 0,
            "execute": false,
            "note": "检测空气",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 15,
            "y": 5,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "execute as @e[name=砍树] run scoreboard players operation @s cal_10 %= base100 cal_10",
            "delay": 0,
            "execute": false,
            "note": "对100取余",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 16,
            "y": 3,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 2,
            "content": "execute as @e[name=砍树,c=-1] as @s[tag=all_has_do] run tag @e remove all_has_do",
            "delay": 0,
            "execute": false,
            "note": "有序遍历",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 16,
            "y": 5,
            "z": 0
        },
        {
            "block": "command_block",
            "condition": 1,
            "content": "execute as @e[name=砍树,scores={cal_10=0}] at @s run tp ~-10 ~-1 ~",
            "delay": 0,
            "execute": false,
            "note": "往下",
            "redstone": 2,
            "toward": 3,
            "type": 2,
            "x": 17,
            "y": 3,
            "z": 0
        }
    ],
    "jsonversion": "1.2",
    "mcversion": "基岩版1.19.80"
}
